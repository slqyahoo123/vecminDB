# 视频特征提取器贡献指南

非常感谢您对视频特征提取器项目的兴趣！本文档将指导您如何为项目做出贡献。

## 开发环境设置

1. **克隆仓库**
   ```bash
   git clone [仓库URL]
   cd [仓库目录]
   ```

2. **安装依赖**
   确保您已经安装了Rust开发环境。推荐使用rustup工具链管理器：
   ```bash
   curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
   rustup update
   ```

3. **构建项目**
   ```bash
   cargo build
   ```

4. **运行测试**
   ```bash
   cargo test --package vecmind --lib -- data::multimodal::video_extractor::tests
   ```

## 贡献流程

1. **查看现有问题**
   - 在开始工作前，请查看项目的Issues列表，了解已知问题和计划中的改进
   - 如果您想处理未列出的问题，请先创建一个新的Issue进行讨论

2. **分支策略**
   - 从`main`分支创建新的功能分支进行开发
   - 分支命名规范：
     - 功能开发：`feature/[功能名称]`
     - 错误修复：`bugfix/[问题简述]`
     - 性能优化：`optimize/[优化目标]`

3. **提交代码**
   - 保持提交消息清晰简洁
   - 提交格式：`[类型]: [简短描述] (#issue号)`
   - 类型可以是：feat(新功能)、fix(修复)、docs(文档)、style(格式)、refactor(重构)、perf(性能)、test(测试)等

4. **创建Pull Request**
   - 提交PR前请确保代码通过所有测试
   - PR应该包含详细的描述，解释所做的更改和解决的问题
   - 如有界面变化，请附上截图

## 代码规范

1. **代码风格**
   - 遵循Rust官方代码风格指南
   - 使用`cargo fmt`格式化代码
   - 使用`cargo clippy`进行静态分析

2. **注释要求**
   - 为公共API提供文档注释（使用`///`或`//!`）
   - 为复杂逻辑添加实现注释
   - 文档注释中包含使用示例

3. **测试要求**
   - 新功能必须有相应的单元测试
   - 修复bug时添加能覆盖此问题的测试
   - 保持测试覆盖率在70%以上

## 模块职责

开发时请遵循模块的职责划分：

1. **types.rs** - 类型定义
   - 添加新的数据结构和枚举类型
   - 确保类型有恰当的trait实现

2. **error.rs** - 错误处理
   - 为新的错误场景添加适当的错误类型
   - 实现错误转换和错误信息格式化

3. **config.rs** - 配置管理
   - 添加新的配置选项和验证逻辑
   - 更新配置序列化/反序列化功能

4. **processing.rs** - 核心处理逻辑
   - 实现新的特征提取算法
   - 优化现有处理流程

5. **cache.rs** - 缓存管理
   - 改进缓存策略
   - 优化内存使用

6. **benchmark.rs** - 性能评估
   - 添加新的性能指标
   - 改进性能评估方法

7. **batch.rs** - 批处理功能
   - 改进批处理策略
   - 优化资源使用

8. **util.rs** - 实用工具
   - 添加通用辅助函数
   - 保持函数简洁和单一职责

## 性能考量

1. **内存使用**
   - 处理大型视频时注意内存消耗
   - 使用流式处理避免加载整个视频到内存

2. **并行处理**
   - 利用`rayon`进行并行计算
   - 注意线程安全性

3. **I/O优化**
   - 批量读取以减少I/O操作
   - 考虑使用内存映射文件进行大文件处理

## 发布流程

1. **版本号规范**
   - 遵循语义化版本（Semantic Versioning）
   - 格式：MAJOR.MINOR.PATCH

2. **发布检查清单**
   - 所有测试通过
   - 文档更新
   - CHANGELOG已更新
   - 性能未出现退化

3. **发布标签**
   - 为每个发布版本创建Git标签
   - 标签格式：v[版本号]

## 联系方式

如有任何问题或建议，请通过以下方式联系：

- 项目Issues
- 开发者邮件列表
- 项目维护者：[维护者联系方式]

感谢您的贡献！